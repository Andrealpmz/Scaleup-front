import{z as w,A as k,h as y,o as d,c as p,g as e,e as u,l as c,k as f,n as g,E as o,d as h,G as S,J as x,H as I,I as C,_ as T}from"./index-8e5c7979.js";import{_ as V}from"./mail-baba8d83.js";import{_ as E}from"./lock-7c7b8546.js";import{s as v}from"./inputtext.esm-b76ec9ec.js";import{O as N}from"./dataOrganization-5ad18964.js";import{S as m}from"./sweetalert2.all-169d0d87.js";const i=n=>(I("data-v-678230e3"),n=n(),C(),n),O={id:"content"},P=S('<div id="items-left" data-v-678230e3><div id="info" data-v-678230e3><img src="'+x+'" draggable="false" class="logo" data-v-678230e3><h1 class="text" data-v-678230e3>Una solución para cada tipo de negocio</h1><p class="pfText" data-v-678230e3> ¿Estás listo para conocer en detalle la operación de tu agencia? </p></div></div>',1),U={class:"login"},q={class:"form"},D={id:"form-title"},J=i(()=>e("h1",{class:"title-log"},"Iniciar sesión",-1)),L={id:"linkRegistro"},z={class:"input_form"},A=i(()=>e("label",{class:"form-label",for:"#email"},"Email",-1)),B={class:"fields"},R={class:"p-input-icon-left"},j=i(()=>e("i",{class:"icons-form"},[e("img",{draggable:"false",src:V,class:"material-symbols-rounded"})],-1)),G={key:0,class:"p-error"},H=i(()=>e("label",{class:"form-label",for:"#password"},"Contraseña",-1)),F={class:"p-input-icon-left"},K=i(()=>e("i",{class:"icons-form"},[e("img",{draggable:"false",src:E,class:"material-symbols-rounded"})],-1)),M={key:0,class:"p-error"},Q={id:"btnInferior"},W=i(()=>e("span",{id:"linkOlvido"},"¿Olvidaste la contraseña?",-1)),X=i(()=>e("p",{id:"Terms"},[u(" Al iniciar sesión, acepta los "),e("a",{href:"#"},"Términos de uso y reconoce la Política de privacidad y la Política de cookies.")],-1)),Y=w({__name:"Login",setup(n){"https://k35dpbq0-3000.use2.devtunnels.ms/api";console.log(m);const s=N(),l=k(!1);async function b(){l.value=!0;const _={mail:s.email,password:s.password},r=JSON.stringify(_);console.log(r);try{const t=await fetch("https://k35dpbq0-3000.use2.devtunnels.ms/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:r});if(t.ok){const a=await t.json();switch(console.log(a.user),localStorage.clear(),localStorage.setItem("userData",JSON.stringify(a.user)),console.log(localStorage.getItem("userData")),console.log(a.user.form),a.user.form){case"terminado":window.location.href="/CategoriesTest";break;case"en_progreso":window.location.href="/CategoriesTest";break;case"sin_iniciar":window.location.href="/TechnologyReadiness";break;default:console.error("Unexpected form status:",a.formStatus),alert("Estado desconocido, intenta de nuevo");break}}else console.error("Credenciales incorrectas:",t.statusText),m.fire({icon:"error",title:"Error!",text:"Credenciales incorrectas"})}catch(t){console.error("Error al realizar la solicitud:",t),m.fire({icon:"warning",title:"Importante!",text:"Error en el servidor. Por favor, inténtalo de nuevo."})}}return(_,r)=>{const t=y("router-link");return d(),p("article",O,[P,e("div",U,[e("form",q,[e("div",D,[J,e("p",L,[u(" ¿Usuario nuevo? "),c(t,{id:"linkTo",to:"/register"},{default:f(()=>[u("Regístrate")]),_:1})])]),e("div",z,[A,e("div",B,[e("span",R,[j,c(o(v),{type:"text",class:g(["p-inputtext-sm",{"p-invalid":o(s).email===""&&l.value===!0}]),modelValue:o(s).email,"onUpdate:modelValue":r[0]||(r[0]=a=>o(s).email=a),placeholder:"Ingresa tu email"},null,8,["class","modelValue"])]),o(s).email===""&&l.value===!0?(d(),p("small",G,"El email es requerido")):h("",!0)]),H,e("span",F,[K,c(o(v),{type:"password",class:g(["p-inputtext-sm",{"p-invalid":o(s).password===""&&l.value===!0}]),modelValue:o(s).password,"onUpdate:modelValue":r[1]||(r[1]=a=>o(s).password=a),placeholder:"Ingresa tu contraseña"},null,8,["class","modelValue"])]),o(s).password===""&&l.value===!0?(d(),p("small",M,"La contraseña es requerida")):h("",!0)]),e("div",Q,[c(t,{to:"/forgotPass"},{default:f(()=>[W]),_:1}),e("div",{class:"btnSubmit"},[e("input",{class:"form-submit",type:"button",onClick:b,value:"Ingresar"})])]),X])])])}}});const te=T(Y,[["__scopeId","data-v-678230e3"]]);export{te as default};
